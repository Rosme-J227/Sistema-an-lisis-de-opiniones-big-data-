<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Tablero - Opiniones</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
  </head>
  <body>
    <div class="container my-4">
      <h1 class="mb-3">Tablero de Opiniones</h1>

      <div id="error" class="alert alert-danger d-none" role="alert"></div>

      <div class="row mb-3" id="kpis">
        <div class="col-md-4">
          <div class="card p-3 shadow-sm">
            <div class="small">Comentarios procesados</div>
            <div id="total-comments" class="display-6">Cargando...</div>
          </div>
        </div>
        <div class="col-md-8 d-flex align-items-center">
          <div class="w-100">
            <div class="form-inline mb-2">
              <label class="form-label me-2">Top productos:</label>
              <select id="topN" class="form-select w-auto">
                <option value="5">5</option>
                <option value="6" selected>6</option>
                <option value="8">8</option>
              </select>
            </div>
            <div class="d-flex gap-3 align-items-center">
              <small class="text-muted">Usa el selector para ajustar la visualización de productos.</small>
              <div class="ms-auto d-flex align-items-center">
                <label class="me-2 mb-0">Definición "satisfecho":</label>
                <select id="satisfactionDefinition" class="form-select w-auto">
                  <option value="rating" selected>Rating ≥ 4</option>
                  <option value="score">Score ≥ 0.5</option>
                </select>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="row gy-4">
        <div class="col-lg-6">
          <div class="card p-3 shadow-sm">
            <h5>Opiniones por producto y fecha (Top N)</h5>
            <canvas id="opinionsByProductDate"></canvas>
          </div>
        </div>

        <div class="col-lg-6">
          <div class="card p-3 shadow-sm">
            <h5>Porcentaje de satisfacción por producto</h5>
            <canvas id="pctSatisfiedByProduct"></canvas>
          </div>
        </div>

        <div class="col-lg-6">
          <div class="card p-3 shadow-sm">
            <h5>Tendencia de satisfacción en el tiempo</h5>
            <canvas id="satisfactionTrend"></canvas>
          </div>
        </div>

        <div class="col-lg-6">
          <div class="card p-3 shadow-sm">
            <h5>Opiniones totales por producto</h5>
            <canvas id="totalOpinionsByProduct"></canvas>
          </div>
        </div>
      </div>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="app.js"></script>
  </body>
</html>
